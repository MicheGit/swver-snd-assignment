\section{Implementation}

\subsection{The Bounded Intervals Domain}

\begin{frame}{Bounded Intervals - Definition}
    \[ I_{m,n} \subset \wp(\mathbb{Z})\text{ with }m,n\in\mathbb{Z}\cup{-\infty, \infty}\]
    \begin{flalign*}
        I_{m,n} & = \{ \mathbb{Z}, \emptyset \} \cup \{ \{ z \} \pipe z \in \mathbb{Z} \} \\
        & \cup \{ \{ x \pipe w <= x <= z \} \pipe x,w,z \in \mathbb{Z}\text{ s.t. }m <= w <= z <= n \} \\
        & \cup \{ \{ x \pipe x \leq z \} \pipe x,z \in \mathbb{Z}\text{ s.t. }m <= z <= n\} \\
        & \cup \{ \{ x \pipe x \geq z \} \pipe x,z \in \mathbb{Z}\text{ s.t. }m <= z <= n\} \\
    \end{flalign*}
\end{frame}

\begin{frame}{Bounded Intervals - Properties (1)}

    \begin{exampleblock}{$I_{m,n}$ is partially ordered}
        \[ i_1 \leq i_2 \iff i_1 \subseteq i_2 \]
    \end{exampleblock}

    \begin{exampleblock}{$I_{m,n}$ is a complete lattice}
        \begin{flalign*}
            \bot_{I_{m,n}} &= \emptyset \\
            \top_{I_{m,n}} &= \mathbb{Z} \\
            \lor_{I_{m,n}} &= \cup \\
            \land_{I_{m,n}} &= \cap
        \end{flalign*}
    \end{exampleblock}
\end{frame}

\begin{frame}{Bounded Intervals - Properties (2)}
    \begin{itemize}
        \item $I_{m,n}$ has no infinite ascending chains when $m \neq -\infty \land n \neq \infty$:
        \begin{itemize}
            \item when $m,n\in \mathbb{N}$ the fixed-point iteration sequence induced by $\mathcal{D}^{\#}\llbracket S_1 \rrbracket s$ $\forall s \in \mathbb{S}_A,\,\,S_1 \in \textbf{While}$ converges in finite time;
            \item otherwise, we must make use of the widening operator $\nabla: \mathbb{S}_A \to \mathbb{S}_A \to\mathbb{S}_A$ in order to enforce convergence. 
        \end{itemize}
        \item $I_{m,n}$ has no infinite descending chains:
        \begin{itemize}
            \item any descending greatest fixed-point search converges in finite time;
            \item there is no need for a narrowing operator $\Delta: \mathbb{S}_A \to \mathbb{S}_A \to\mathbb{S}_A$.
        \end{itemize}
    \end{itemize}
    
\end{frame}

\subsection{Usage}

\begin{frame}[fragile]{Usage}
    The program runs with the command
    \begin{lstlisting}[escapeinside={(*}{*)}]{language=bash}
        $ cabal run ai (*\texttt{--}*) (*\emph{path/to/file.whl}*)
    \end{lstlisting}
    This command will read the file given as input and as output:
    \begin{itemize}
        \item it will output the invariant after the last program point;
        \item it will rewrite the input into a file called as the input plus \texttt{.inv}, with the invariants as comments at any program point.
    \end{itemize}
    
\end{frame}

\begin{frame}{Program Points}
    The program points are located along with the statements:
    \begin{itemize}
        \item the terminals $x\mathtt{ := }e$ and \texttt{skip} are followed by one program point;
        \item the \texttt{then} and \texttt{else} sub-statements in the branch statement are preceded by one program point each;
        \item while statements are preceded by a program point, whose invariant is the loop invariant of that loop;
        \item the \texttt{do} sub-statement in the loop statement is preceded by one program point;
        \item while statements are followed by one program point, which is the invariant after the loop exit.
    \end{itemize}
\end{frame}

\begin{frame}[fragile]{Examples (1)}
    \begin{block}{Input}
        \small\lstinputlisting[language=whilelang]{../assets/prog8.whl}
    \end{block}
    \begin{block}{Output}
        \small\lstinputlisting[language=whilelang]{../assets/prog8.whl.inv}
    \end{block}
\end{frame}

\begin{frame}[fragile]{Examples (2)}
    \begin{block}{Input}
        \small\lstinputlisting[language=whilelang]{../assets/prog9.whl}
    \end{block}
    \begin{block}{Output}
        \small\lstinputlisting[language=whilelang]{../assets/prog9.whl.inv}
    \end{block}
\end{frame}

\begin{frame}[fragile]{Examples (3)}
    \begin{block}{Input}
        \small\lstinputlisting[language=whilelang]{../assets/prog3.whl}
    \end{block}
    \begin{block}{Output}
        \small\lstinputlisting[language=whilelang]{../assets/prog3.whl.inv}
    \end{block}
\end{frame}